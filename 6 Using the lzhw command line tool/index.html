<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Using the lzhw Command Line tool - lzhw</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Using the lzhw Command Line tool";
    var mkdocs_page_input_path = "6 Using the lzhw command line tool.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> lzhw</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">lzhw (DataFrame Compression)</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../1%20Quick%20Start/">Quick Start</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../2%20Compressing%20DataFrames/">Compressing DataFrames (in Parallel)</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../3%20%28De%29Compressing%20Specific%20columns%20or%20rows%20from%20a%20dataframe/">(De)Compressing specific columns or rows from a dataframe (in Parallel)</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../4%20Compressing%20Large%20CSVs%20in%20Chunks/">Compressing Large CSVs in Chunks</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../5%20More%20Compression%20Functions/">More Compression Functions</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Using the lzhw Command Line tool</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#lzhw-compression-tool">LZHW Compression Tool</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#compress">Compress</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#decompress">Decompress</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#notes-on-the-tool">Notes on the Tool</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#reference">Reference</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../7%20Comparing%20LZHW%20with%20Others/">Comparing LZHW with Others</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">lzhw</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Using the lzhw Command Line tool</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="using-the-lzhw-command-line-tool">Using the lzhw Command Line tool</h1>
<p>In <strong>lzhw_cli</strong> folder, there is a python script that can work on command line tool to compress and decompress files without having to open it in python.</p>
<h4 id="lzhw-compression-tool">LZHW Compression Tool</h4>
<p><strong>Also a downloadable exe tool is available in this <a href="https://github.com/MNoorFawi/lzhw/releases/download/v0.0.10/lzhw.exe">link</a>.</strong>
<strong>The tool allows to compress and decompress files from and to any form, csv, excel etc without any dependencies or installations.</strong></p>
<p><strong>The tool can work in parallel and most of its code is written in Cython, so it is pretty fast</strong>. Next page in the documentation there is a comparison in performance with other tools.</p>
<p>The tool now works perfectly on Windows and Mac version is being developed.</p>
<p>Here is the file and its help argument to see how it works and its arguments:</p>
<pre><code class="bash">lzhw -h
</code></pre>

<p>Output</p>
<pre><code class="bash">usage: lzhw [-h] [-d] -f INPUT -o OUTPUT [-c COLUMNS [COLUMNS ...]] [-r ROWS]
            [-nh] [-p] [-j JOBS]

LZHW is a tabular data compression tool. It is used to compress excel, csv and
any flat file. Version: 0.0.10

optional arguments:
  -h, --help            show this help message and exit
  -d, --decompress      decompress input into output
  -f INPUT, --input INPUT
                        input file to be (de)compressed
  -o OUTPUT, --output OUTPUT
                        output where to save result
  -c COLUMNS [COLUMNS ...], --columns COLUMNS [COLUMNS ...]
                        select specific columns by names or indices (1-based)
                        to compress or decompress
  -r ROWS, --rows ROWS  select specific rows to decompress (1-based)
  -nh, --no-header      skip header / data to be compressed has no header
  -p, --parallel        compress or decompress in parallel
  -j JOBS, --jobs JOBS  Number of CPUs to use if parallel (default all but 2)
</code></pre>

<p>As we can see, the tool takes an input file <strong>"-f"</strong>, and output <strong>"-o"</strong> where it should put the result whether it is compression or decompression based on the optional <strong>"-d"</strong> argument which selects decompression.</p>
<p>The tool as well takes a <strong>"-c"</strong> argument which is the Columns in case we want only to compress or decompress specific columns from the input file instead of dealing with all the columns unnecessarily.
This argument accepts names and indices separated by coma.</p>
<p>The <strong>"-nh"</strong>, --no-header, argument to specify if the data has no header.</p>
<p>The <strong>"-r"</strong>, --rows, argument is to specify number of rows to decompress, in case we don't need to decompress all rows.</p>
<p>The <strong>"-p"</strong>, --parallel, argument is to make compression and decompression goes in parallel to speed it up. And specifying the <strong>"-j"</strong>, --jobs, argument to determine the number of the CPUs to be used, in default it is all CPUs minus 2.</p>
<h4 id="compress">Compress</h4>
<p>How to compress:</p>
<p>The tool can be used through command line. 
For those who are new to command line, the easiest way to start it is to put the <strong>lzhw.exe</strong> tool in the same folder with the sheet you want to compress.
Then go to the folder's directory at the top where you see the directory path and one click then type <strong>cmd</strong>, black command line will open to you where you can type the examples below.</p>
<p><em>Using german_credit data from UCI Machine Learning Repository [1]</em> </p>
<pre><code class="bash">lzhw -f &quot;german_credit.xlsx&quot; -o &quot;gc_comp.txt&quot;
</code></pre>

<pre><code class="bash">Reading files, Can take 1 minute or something ...
Running CScript.exe to convert xls file to csv for better performance

Microsoft (R) Windows Script Host Version 5.812
Copyright (C) Microsoft Corporation. All rights reserved.

100%|██████████████████████████████████████████████████████████████████| 62/62 [00:02&lt;00:00, 21.92it/s]
Finalizing Compression ...
Creating gc_comp.txt file ...
time taken:  0.06792410214742024  minutes
Compressed Successfully
</code></pre>

<p><strong>In parallel</strong>:</p>
<pre><code class="bash">lzhw -f &quot;german_credit.xlsx&quot; -o &quot;gc_comp.txt&quot; -p
</code></pre>

<pre><code class="bash">Reading files, Can take 1 minute or something ...
Running CScript.exe to convert xls file to csv for better performance

Microsoft (R) Windows Script Host Version 5.812
Copyright (C) Microsoft Corporation. All rights reserved.

100%|███████████████████████████████████████████████████████████████████| 62/62 [00:00&lt;00:00, 74.28it/s]
Finalizing Compression ...
Creating gc_comp.txt file ...
time taken:  0.030775876839955647  minutes
Compressed Successfully
</code></pre>

<p>Now, let's say we are interested only in compressing the Age, Duration and Amount columns</p>
<pre><code class="bash">lzhw -f &quot;german_credit.xlsx&quot; -o &quot;gc_subset.txt&quot; -c Age,Duration,Amount
</code></pre>

<pre><code class="bash">Reading files, Can take 1 minute or something ...
Running CScript.exe to convert xls file to csv for better performance

Microsoft (R) Windows Script Host Version 5.812
Copyright (C) Microsoft Corporation. All rights reserved.

100%|███████████████████████████████████████████████████| 3/3 [00:00&lt;00:00, 249.99it/s]
Finalizing Compression ...
Creating gc_subset.txt file ...
time taken:  0.01437713384628296  minutes
Compressed Successfully
</code></pre>

<h4 id="decompress">Decompress</h4>
<p>Now it's time to decompress:</p>
<p><strong>If your original excel file was big and of many rows and columns, it's better and faster to decompress it into a csv file instead of excel directly and then save the file as excel if excel type is necessary. This is because python is not that fast in writing data to excel as well as the tool sometimes has "Corrupted Files" issues with excel.</strong></p>
<p>Decompressing in parallel using 2 CPUs.</p>
<pre><code class="bash">lzhw -d -f &quot;gc_comp.txt&quot; -o &quot;gc_decompressed.csv&quot; -p -j 2
</code></pre>

<pre><code class="bash">100%|████████████████████████████████████████████████████| 62/62 [00:00&lt;00:00, 99.00it/s]
Finalizing Decompression ...
Creating gc_decompressed.csv file ...
time taken:  0.014344350496927897  minutes
Decompressed Successfully
</code></pre>

<p>Look at how the <strong>-d</strong> argument is used.</p>
<p>Let's now check that it was decompressed really successfully:</p>
<pre><code class="bash">head -n 4 gc_decompressed.csv

Duration,Amount,InstallmentRatePercentage,ResidenceDuration,Age,NumberExistingCredits,NumberPeopleMaintenance,Telephone,ForeignWorker,Class,CheckingAccountStatus.lt.0,CheckingAccountStatus.0.to.200,CheckingAccountStatus.gt.200,CheckingAccountStatus.none,CreditHistory.NoCredit.AllPaid,CreditHistory.ThisBank.AllPaid,CreditHistory.PaidDuly,CreditHistory.Delay,CreditHistory.Critical,Purpose.NewCar,Purpose.UsedCar,Purpose.Furniture.Equipment,Purpose.Radio.Television,Purpose.DomesticAppliance,Purpose.Repairs,Purpose.Education,Purpose.Vacation,Purpose.Retraining,Purpose.Business,Purpose.Other,SavingsAccountBonds.lt.100,SavingsAccountBonds.100.to.500,SavingsAccountBonds.500.to.1000,SavingsAccountBonds.gt.1000,SavingsAccountBonds.Unknown,EmploymentDuration.lt.1,EmploymentDuration.1.to.4,EmploymentDuration.4.to.7,EmploymentDuration.gt.7,EmploymentDuration.Unemployed,Personal.Male.Divorced.Seperated,Personal.Female.NotSingle,Personal.Male.Single,Personal.Male.Married.Widowed,Personal.Female.Single,OtherDebtorsGuarantors.None,OtherDebtorsGuarantors.CoApplicant,OtherDebtorsGuarantors.Guarantor,Property.RealEstate,Property.Insurance,Property.CarOther,Property.Unknown,OtherInstallmentPlans.Bank,OtherInstallmentPlans.Stores,OtherInstallmentPlans.None,Housing.Rent,Housing.Own,Housing.ForFree,Job.UnemployedUnskilled,Job.UnskilledResident,Job.SkilledEmployee,Job.Management.SelfEmp.HighlyQualified
6,1169,4,4,67,2,1,0,1,Good,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,1,0,1,0,0,0,1,0
48,5951,2,2,22,1,1,1,1,Bad,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0,0,1,0,1,0,0,0,1,0
12,2096,2,3,49,1,2,1,1,Good,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,1,0,1,0,0,1,0,0
</code></pre>

<p>It looks awful in the command line :D but it's decompressed.</p>
<p>Now let's say that we only interested in decompressing the first two columns that we don't remember how they were spelled.</p>
<pre><code class="bash">lzhw -d -f &quot;gc_comp.txt&quot; -o &quot;gc_subset_de.csv&quot; -c 1,2 
</code></pre>

<pre><code class="bash">100%|███████████████████████████████████████████████████| 2/2 [00:00&lt;00:00,  8.05it/s]
Finalizing Decompression ...
Creating gc_subset_de.csv file ...
time taken:  0.00028291543324788414  minutes
Decompressed Successfully
</code></pre>

<p>Now let's have a look at the decompressed file:</p>
<pre><code class="bash">head gc_subset_de.csv

Duration,Amount
6,1169
48,5951
12,2096
42,7882
24,4870
36,9055
24,2835
36,6948
12,3059
</code></pre>

<p>We can also use the <strong>-r</strong> argument to decompress specific rows from the data frame.</p>
<pre><code class="bash">lzhw -d -f &quot;gc_comp.txt&quot; -o &quot;gc_subset_de.csv&quot; -r 4

100%|████████████████████████████████████████████████████| 62/62 [00:00&lt;00:00, 369.69it/s]
Finalizing Decompression ...
Creating gc_subset_de.csv file ...
time taken:  0.007962568600972494  minutes
Decompressed Successfully
</code></pre>

<p>Here we only decompressed the first 4 rows, 1-based, including the header.</p>
<p>Let's look how the data looks like:</p>
<pre><code class="bash">cat &quot;gc_subset_de.csv&quot;

Duration,Amount,InstallmentRatePercentage,ResidenceDuration,Age,NumberExistingCredits,NumberPeopleMaintenance,Telephone,ForeignWorker,Class,CheckingAccountStatus.lt.0,CheckingAccountStatus.0.to.200,CheckingAccountStatus.gt.200,CheckingAccountStatus.none,CreditHistory.NoCredit.AllPaid,CreditHistory.ThisBank.AllPaid,CreditHistory.PaidDuly,CreditHistory.Delay,CreditHistory.Critical,Purpose.NewCar,Purpose.UsedCar,Purpose.Furniture.Equipment,Purpose.Radio.Television,Purpose.DomesticAppliance,Purpose.Repairs,Purpose.Education,Purpose.Vacation,Purpose.Retraining,Purpose.Business,Purpose.Other,SavingsAccountBonds.lt.100,SavingsAccountBonds.100.to.500,SavingsAccountBonds.500.to.1000,SavingsAccountBonds.gt.1000,SavingsAccountBonds.Unknown,EmploymentDuration.lt.1,EmploymentDuration.1.to.4,EmploymentDuration.4.to.7,EmploymentDuration.gt.7,EmploymentDuration.Unemployed,Personal.Male.Divorced.Seperated,Personal.Female.NotSingle,Personal.Male.Single,Personal.Male.Married.Widowed,Personal.Female.Single,OtherDebtorsGuarantors.None,OtherDebtorsGuarantors.CoApplicant,OtherDebtorsGuarantors.Guarantor,Property.RealEstate,Property.Insurance,Property.CarOther,Property.Unknown,OtherInstallmentPlans.Bank,OtherInstallmentPlans.Stores,OtherInstallmentPlans.None,Housing.Rent,Housing.Own,Housing.ForFree,Job.UnemployedUnskilled,Job.UnskilledResident,Job.SkilledEmployee,Job.Management.SelfEmp.HighlyQualified
6,1169,4,4,67,2,1,0,1,Good,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,1,0,1,0,0,0,1,0
48,5951,2,2,22,1,1,1,1,Bad,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0,0,1,0,1,0,0,0,1,0
12,2096,2,3,49,1,2,1,1,Good,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,1,0,1,0,0,1,0,0
42,7882,2,4,45,1,2,1,1,Good,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,1,0,0,1,0
</code></pre>

<p>All data is now 5 rows only including the header.</p>
<h4 id="notes-on-the-tool">Notes on the Tool</h4>
<p><strong>1- compression is much faster than decompression, it is good to compress sequentially and decompress in parallel.</strong></p>
<p><strong>2- This error message can appear while compressing or decompressing in parallel</strong></p>
<pre><code class="bash">lzhw.exe [-h] [-d] -f INPUT -o OUTPUT [-c COLUMNS [COLUMNS ...]]
                [-r ROWS] [-nh]
lzhw.exe: error: the following arguments are required: -f/--input, -o/--output
</code></pre>

<p><strong>It is totally fine, just press Enter and proceed or leave it until it tells you "Compressed Successsfully" or "Decompressed Successfully"</strong>.</p>
<p>The error is due to some parallelization library bug that has nothing to do with the tool so it is ok.</p>
<p><strong>3- The progress bar of columns compression, it doesn't mean that the tool has finished because it needs still to write the answers. So you need to wait until "Compressed Successfully" or "Decompressed Successfully" message appears.</strong></p>
<p><strong>4- The tool takes a couple of seconds from 8 to 15 seconds to start working and compressing at the first time and then it runs faster and faster the more you use it.</strong> </p>
<h5 id="reference">Reference</h5>
<pre><code>    [1] Dua, D. and Graff, C. (2019). UCI Machine Learning Repository [http://archive.ics.uci.edu/ml]. Irvine, CA: University of California, School of Information and Computer Science.
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../7%20Comparing%20LZHW%20with%20Others/" class="btn btn-neutral float-right" title="Comparing LZHW with Others">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../5%20More%20Compression%20Functions/" class="btn btn-neutral" title="More Compression Functions"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../5%20More%20Compression%20Functions/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../7%20Comparing%20LZHW%20with%20Others/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
